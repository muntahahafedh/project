{"ast":null,"code":"import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import axios from\"axios\";import*as ENV from\"../config\";// Async Thunks\nexport const fetchEvents=createAsyncThunk(\"events/fetchEvents\",async()=>{const res=await axios.get(\"\".concat(ENV.SERVER_URL,\"/events\"));return res.data.events;});export const registerEvent=createAsyncThunk(\"events/registerEvent\",async eventData=>{const res=await axios.post(\"\".concat(ENV.SERVER_URL,\"/registerEvent\"),eventData);return res.data.event;// تأكد أن السيرفر يرجع جميع الحقول الجديدة\n});export const updateEvent=createAsyncThunk(\"events/updateEvent\",async eventData=>{const res=await axios.put(\"\".concat(ENV.SERVER_URL,\"/events/\").concat(eventData._id),eventData);return res.data.event;});export const deleteEvent=createAsyncThunk(\"events/deleteEvent\",async eventId=>{await axios.delete(\"\".concat(ENV.SERVER_URL,\"/events/\").concat(eventId));return eventId;});export const initialEventState={events:[],isLoading:false,isSuccess:false,isError:false};const eventSlice=createSlice({name:\"events\",initialState:initialEventState,reducers:{},extraReducers:builder=>{builder// Fetch Events\n.addCase(fetchEvents.pending,state=>{state.isLoading=true;}).addCase(fetchEvents.fulfilled,(state,action)=>{state.isLoading=false;state.events=action.payload;state.isSuccess=true;}).addCase(fetchEvents.rejected,state=>{state.isLoading=false;state.isError=true;})// Register Event\n.addCase(registerEvent.pending,state=>{state.isLoading=true;}).addCase(registerEvent.fulfilled,(state,action)=>{state.isLoading=false;// نضيف الحدث الجديد مع جميع الحقول الجديدة\nstate.events.push(action.payload);state.isSuccess=true;}).addCase(registerEvent.rejected,state=>{state.isLoading=false;state.isError=true;})// Update Event\n.addCase(updateEvent.pending,state=>{state.isLoading=true;}).addCase(updateEvent.fulfilled,(state,action)=>{state.isLoading=false;const index=state.events.findIndex(e=>e._id===action.payload._id);if(index!==-1)state.events[index]=action.payload;}).addCase(updateEvent.rejected,state=>{state.isLoading=false;state.isError=true;})// Delete Event\n.addCase(deleteEvent.pending,state=>{state.isLoading=true;}).addCase(deleteEvent.fulfilled,(state,action)=>{state.events=state.events.filter(e=>e._id!==action.payload);}).addCase(deleteEvent.rejected,state=>{state.isLoading=false;state.isError=true;});}});// ✅ نصدر الافتراضي\nexport default eventSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","ENV","fetchEvents","res","get","concat","SERVER_URL","data","events","registerEvent","eventData","post","event","updateEvent","put","_id","deleteEvent","eventId","delete","initialEventState","isLoading","isSuccess","isError","eventSlice","name","initialState","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","rejected","push","index","findIndex","e","filter","reducer"],"sources":["C:/Users/Huawe/OneDrive/Desktop/Muyen-main/Muyen-main/client/src/Features/eventSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport * as ENV from \"../config\";\n\n// Async Thunks\nexport const fetchEvents = createAsyncThunk(\"events/fetchEvents\", async () => {\n  const res = await axios.get(`${ENV.SERVER_URL}/events`);\n  return res.data.events;\n});\n\nexport const registerEvent = createAsyncThunk(\n  \"events/registerEvent\",\n  async (eventData) => {\n    const res = await axios.post(`${ENV.SERVER_URL}/registerEvent`, eventData);\n    return res.data.event; // تأكد أن السيرفر يرجع جميع الحقول الجديدة\n  }\n);\n\nexport const updateEvent = createAsyncThunk(\n  \"events/updateEvent\",\n  async (eventData) => {\n    const res = await axios.put(\n      `${ENV.SERVER_URL}/events/${eventData._id}`,\n      eventData\n    );\n    return res.data.event;\n  }\n);\n\nexport const deleteEvent = createAsyncThunk(\n  \"events/deleteEvent\",\n  async (eventId) => {\n    await axios.delete(`${ENV.SERVER_URL}/events/${eventId}`);\n    return eventId;\n  }\n);\n\nexport const initialEventState = {\n  events: [],\n  isLoading: false,\n  isSuccess: false,\n  isError: false,\n};\n\nconst eventSlice = createSlice({\n  name: \"events\",\n  initialState: initialEventState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder\n      // Fetch Events\n      .addCase(fetchEvents.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(fetchEvents.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.events = action.payload;\n        state.isSuccess = true;\n      })\n      .addCase(fetchEvents.rejected, (state) => {\n        state.isLoading = false;\n        state.isError = true;\n      })\n\n      // Register Event\n      .addCase(registerEvent.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(registerEvent.fulfilled, (state, action) => {\n        state.isLoading = false;\n        // نضيف الحدث الجديد مع جميع الحقول الجديدة\n        state.events.push(action.payload);\n        state.isSuccess = true;\n      })\n      .addCase(registerEvent.rejected, (state) => {\n        state.isLoading = false;\n        state.isError = true;\n      })\n\n      // Update Event\n      .addCase(updateEvent.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(updateEvent.fulfilled, (state, action) => {\n        state.isLoading = false;\n        const index = state.events.findIndex(\n          (e) => e._id === action.payload._id\n        );\n        if (index !== -1) state.events[index] = action.payload;\n      })\n      .addCase(updateEvent.rejected, (state) => {\n        state.isLoading = false;\n        state.isError = true;\n      })\n\n      // Delete Event\n      .addCase(deleteEvent.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(deleteEvent.fulfilled, (state, action) => {\n        state.events = state.events.filter((e) => e._id !== action.payload);\n      })\n      .addCase(deleteEvent.rejected, (state) => {\n        state.isLoading = false;\n        state.isError = true;\n      });\n  },\n});\n\n// ✅ نصدر الافتراضي\nexport default eventSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}