{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport * as ENV from \"../config\";\n\n// Async Thunks\nexport const fetchEvents = createAsyncThunk(\"events/fetchEvents\", async () => {\n  const res = await axios.get(`${ENV.SERVER_URL}/events`);\n  return res.data.events;\n});\nexport const registerEvent = createAsyncThunk(\"events/registerEvent\", async eventData => {\n  const res = await axios.post(`${ENV.SERVER_URL}/registerEvent`, eventData);\n  return res.data.event; // تأكد أن السيرفر يرجع جميع الحقول الجديدة\n});\nexport const updateEvent = createAsyncThunk(\"events/updateEvent\", async eventData => {\n  const res = await axios.put(`${ENV.SERVER_URL}/events/${eventData._id}`, eventData);\n  return res.data.event;\n});\nexport const deleteEvent = createAsyncThunk(\"events/deleteEvent\", async eventId => {\n  await axios.delete(`${ENV.SERVER_URL}/events/${eventId}`);\n  return eventId;\n});\nexport const initialEventState = {\n  events: [],\n  isLoading: false,\n  isSuccess: false,\n  isError: false\n};\nconst eventSlice = createSlice({\n  name: \"events\",\n  initialState: initialEventState,\n  reducers: {},\n  extraReducers: builder => {\n    builder\n    // Fetch Events\n    .addCase(fetchEvents.pending, state => {\n      state.isLoading = true;\n    }).addCase(fetchEvents.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.events = action.payload;\n      state.isSuccess = true;\n    }).addCase(fetchEvents.rejected, state => {\n      state.isLoading = false;\n      state.isError = true;\n    })\n\n    // Register Event\n    .addCase(registerEvent.pending, state => {\n      state.isLoading = true;\n    }).addCase(registerEvent.fulfilled, (state, action) => {\n      state.isLoading = false;\n      // نضيف الحدث الجديد مع جميع الحقول الجديدة\n      state.events.push(action.payload);\n      state.isSuccess = true;\n    }).addCase(registerEvent.rejected, state => {\n      state.isLoading = false;\n      state.isError = true;\n    })\n\n    // Update Event\n    .addCase(updateEvent.pending, state => {\n      state.isLoading = true;\n    }).addCase(updateEvent.fulfilled, (state, action) => {\n      state.isLoading = false;\n      const index = state.events.findIndex(e => e._id === action.payload._id);\n      if (index !== -1) state.events[index] = action.payload;\n    }).addCase(updateEvent.rejected, state => {\n      state.isLoading = false;\n      state.isError = true;\n    })\n\n    // Delete Event\n    .addCase(deleteEvent.pending, state => {\n      state.isLoading = true;\n    }).addCase(deleteEvent.fulfilled, (state, action) => {\n      state.events = state.events.filter(e => e._id !== action.payload);\n    }).addCase(deleteEvent.rejected, state => {\n      state.isLoading = false;\n      state.isError = true;\n    });\n  }\n});\n\n// ✅ نصدر الافتراضي\nexport default eventSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","ENV","fetchEvents","res","get","SERVER_URL","data","events","registerEvent","eventData","post","event","updateEvent","put","_id","deleteEvent","eventId","delete","initialEventState","isLoading","isSuccess","isError","eventSlice","name","initialState","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","rejected","push","index","findIndex","e","filter","reducer"],"sources":["C:/Users/Huawe/OneDrive/Desktop/Muyen-main/Muyen-main/client/src/Features/eventSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport * as ENV from \"../config\";\n\n// Async Thunks\nexport const fetchEvents = createAsyncThunk(\"events/fetchEvents\", async () => {\n  const res = await axios.get(`${ENV.SERVER_URL}/events`);\n  return res.data.events;\n});\n\nexport const registerEvent = createAsyncThunk(\n  \"events/registerEvent\",\n  async (eventData) => {\n    const res = await axios.post(`${ENV.SERVER_URL}/registerEvent`, eventData);\n    return res.data.event; // تأكد أن السيرفر يرجع جميع الحقول الجديدة\n  }\n);\n\nexport const updateEvent = createAsyncThunk(\n  \"events/updateEvent\",\n  async (eventData) => {\n    const res = await axios.put(\n      `${ENV.SERVER_URL}/events/${eventData._id}`,\n      eventData\n    );\n    return res.data.event;\n  }\n);\n\nexport const deleteEvent = createAsyncThunk(\n  \"events/deleteEvent\",\n  async (eventId) => {\n    await axios.delete(`${ENV.SERVER_URL}/events/${eventId}`);\n    return eventId;\n  }\n);\n\nexport const initialEventState = {\n  events: [],\n  isLoading: false,\n  isSuccess: false,\n  isError: false,\n};\n\nconst eventSlice = createSlice({\n  name: \"events\",\n  initialState: initialEventState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder\n      // Fetch Events\n      .addCase(fetchEvents.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(fetchEvents.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.events = action.payload;\n        state.isSuccess = true;\n      })\n      .addCase(fetchEvents.rejected, (state) => {\n        state.isLoading = false;\n        state.isError = true;\n      })\n\n      // Register Event\n      .addCase(registerEvent.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(registerEvent.fulfilled, (state, action) => {\n        state.isLoading = false;\n        // نضيف الحدث الجديد مع جميع الحقول الجديدة\n        state.events.push(action.payload);\n        state.isSuccess = true;\n      })\n      .addCase(registerEvent.rejected, (state) => {\n        state.isLoading = false;\n        state.isError = true;\n      })\n\n      // Update Event\n      .addCase(updateEvent.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(updateEvent.fulfilled, (state, action) => {\n        state.isLoading = false;\n        const index = state.events.findIndex(\n          (e) => e._id === action.payload._id\n        );\n        if (index !== -1) state.events[index] = action.payload;\n      })\n      .addCase(updateEvent.rejected, (state) => {\n        state.isLoading = false;\n        state.isError = true;\n      })\n\n      // Delete Event\n      .addCase(deleteEvent.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(deleteEvent.fulfilled, (state, action) => {\n        state.events = state.events.filter((e) => e._id !== action.payload);\n      })\n      .addCase(deleteEvent.rejected, (state) => {\n        state.isLoading = false;\n        state.isError = true;\n      });\n  },\n});\n\n// ✅ نصدر الافتراضي\nexport default eventSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}