{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport * as ENV from \"../config\";\n\n// جلب كل الوظائف\nexport const fetchJobs = createAsyncThunk(\"jobs/fetchJobs\", async (_, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await axios.get(`${ENV.SERVER_URL}/jobs`);\n    return res.data.jobs;\n  } catch (err) {\n    var _err$response, _err$response$data;\n    return rejectWithValue(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || err.message);\n  }\n});\n\n// تسجيل وظيفة\nexport const registerJob = createAsyncThunk(\"jobs/registerJob\", async (jobData, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await axios.post(`${ENV.SERVER_URL}/registerJob`, jobData);\n    return res.data.job;\n  } catch (err) {\n    var _err$response2, _err$response2$data;\n    // عرض رسالة الخطأ المرسلة من السيرفر\n    return rejectWithValue(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || err.message);\n  }\n});\nexport const initialJobState = {\n  jobs: [],\n  isLoading: false,\n  isSuccess: false,\n  isError: false,\n  errorMessage: \"\" // لإظهار رسالة الخطأ\n};\nconst jobsSlice = createSlice({\n  name: \"jobs\",\n  initialState: initialJobState,\n  reducers: {\n    resetJobState: state => {\n      state.isLoading = false;\n      state.isSuccess = false;\n      state.isError = false;\n      state.errorMessage = \"\";\n    }\n  },\n  extraReducers: builder => {\n    builder\n    // تسجيل وظيفة\n    .addCase(registerJob.pending, state => {\n      state.isLoading = true;\n      state.isError = false;\n      state.errorMessage = \"\";\n    }).addCase(registerJob.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.jobs.push(action.payload);\n      state.isSuccess = true;\n    }).addCase(registerJob.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isError = true;\n      state.errorMessage = action.payload || \"Failed to register job\";\n    })\n\n    // جلب الوظائف\n    .addCase(fetchJobs.pending, state => {\n      state.isLoading = true;\n      state.isError = false;\n      state.errorMessage = \"\";\n    }).addCase(fetchJobs.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.jobs = action.payload;\n    }).addCase(fetchJobs.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isError = true;\n      state.errorMessage = action.payload || \"Failed to fetch jobs\";\n    });\n  }\n});\nexport const {\n  resetJobState\n} = jobsSlice.actions;\nexport default jobsSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","ENV","fetchJobs","_","rejectWithValue","res","get","SERVER_URL","data","jobs","err","_err$response","_err$response$data","response","error","message","registerJob","jobData","post","job","_err$response2","_err$response2$data","initialJobState","isLoading","isSuccess","isError","errorMessage","jobsSlice","name","initialState","reducers","resetJobState","state","extraReducers","builder","addCase","pending","fulfilled","action","push","payload","rejected","actions","reducer"],"sources":["C:/Users/Huawe/OneDrive/Desktop/Muyen-main/Muyen-main/client/src/Features/jobsSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\nimport * as ENV from \"../config\";\r\n\r\n// جلب كل الوظائف\r\nexport const fetchJobs = createAsyncThunk(\r\n  \"jobs/fetchJobs\",\r\n  async (_, { rejectWithValue }) => {\r\n    try {\r\n      const res = await axios.get(`${ENV.SERVER_URL}/jobs`);\r\n      return res.data.jobs;\r\n    } catch (err) {\r\n      return rejectWithValue(err.response?.data?.error || err.message);\r\n    }\r\n  }\r\n);\r\n\r\n// تسجيل وظيفة\r\nexport const registerJob = createAsyncThunk(\r\n  \"jobs/registerJob\",\r\n  async (jobData, { rejectWithValue }) => {\r\n    try {\r\n      const res = await axios.post(`${ENV.SERVER_URL}/registerJob`, jobData);\r\n      return res.data.job;\r\n    } catch (err) {\r\n      // عرض رسالة الخطأ المرسلة من السيرفر\r\n      return rejectWithValue(err.response?.data?.error || err.message);\r\n    }\r\n  }\r\n);\r\n\r\nexport const initialJobState = {\r\n  jobs: [],\r\n  isLoading: false,\r\n  isSuccess: false,\r\n  isError: false,\r\n  errorMessage: \"\", // لإظهار رسالة الخطأ\r\n};\r\n\r\nconst jobsSlice = createSlice({\r\n  name: \"jobs\",\r\n  initialState: initialJobState,\r\n  reducers: {\r\n    resetJobState: (state) => {\r\n      state.isLoading = false;\r\n      state.isSuccess = false;\r\n      state.isError = false;\r\n      state.errorMessage = \"\";\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      // تسجيل وظيفة\r\n      .addCase(registerJob.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.isError = false;\r\n        state.errorMessage = \"\";\r\n      })\r\n      .addCase(registerJob.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.jobs.push(action.payload);\r\n        state.isSuccess = true;\r\n      })\r\n      .addCase(registerJob.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isError = true;\r\n        state.errorMessage = action.payload || \"Failed to register job\";\r\n      })\r\n\r\n      // جلب الوظائف\r\n      .addCase(fetchJobs.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.isError = false;\r\n        state.errorMessage = \"\";\r\n      })\r\n      .addCase(fetchJobs.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.jobs = action.payload;\r\n      })\r\n      .addCase(fetchJobs.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isError = true;\r\n        state.errorMessage = action.payload || \"Failed to fetch jobs\";\r\n      });\r\n  },\r\n});\r\n\r\nexport const { resetJobState } = jobsSlice.actions;\r\nexport default jobsSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}