{"ast":null,"code":"import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import axios from\"axios\";import*as ENV from\"../config\";// جلب كل الوظائف\nexport const fetchJobs=createAsyncThunk(\"jobs/fetchJobs\",async(_,_ref)=>{let{rejectWithValue}=_ref;try{const res=await axios.get(\"\".concat(ENV.SERVER_URL,\"/jobs\"));return res.data.jobs;}catch(err){var _err$response,_err$response$data;return rejectWithValue(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||err.message);}});// تسجيل وظيفة\nexport const registerJob=createAsyncThunk(\"jobs/registerJob\",async(jobData,_ref2)=>{let{rejectWithValue}=_ref2;try{const res=await axios.post(\"\".concat(ENV.SERVER_URL,\"/registerJob\"),jobData);return res.data.job;}catch(err){var _err$response2,_err$response2$data;// عرض رسالة الخطأ المرسلة من السيرفر\nreturn rejectWithValue(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||err.message);}});export const initialJobState={jobs:[],isLoading:false,isSuccess:false,isError:false,errorMessage:\"\"// لإظهار رسالة الخطأ\n};const jobsSlice=createSlice({name:\"jobs\",initialState:initialJobState,reducers:{resetJobState:state=>{state.isLoading=false;state.isSuccess=false;state.isError=false;state.errorMessage=\"\";}},extraReducers:builder=>{builder// تسجيل وظيفة\n.addCase(registerJob.pending,state=>{state.isLoading=true;state.isError=false;state.errorMessage=\"\";}).addCase(registerJob.fulfilled,(state,action)=>{state.isLoading=false;state.jobs.push(action.payload);state.isSuccess=true;}).addCase(registerJob.rejected,(state,action)=>{state.isLoading=false;state.isError=true;state.errorMessage=action.payload||\"Failed to register job\";})// جلب الوظائف\n.addCase(fetchJobs.pending,state=>{state.isLoading=true;state.isError=false;state.errorMessage=\"\";}).addCase(fetchJobs.fulfilled,(state,action)=>{state.isLoading=false;state.jobs=action.payload;}).addCase(fetchJobs.rejected,(state,action)=>{state.isLoading=false;state.isError=true;state.errorMessage=action.payload||\"Failed to fetch jobs\";});}});export const{resetJobState}=jobsSlice.actions;export default jobsSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","ENV","fetchJobs","_","_ref","rejectWithValue","res","get","concat","SERVER_URL","data","jobs","err","_err$response","_err$response$data","response","error","message","registerJob","jobData","_ref2","post","job","_err$response2","_err$response2$data","initialJobState","isLoading","isSuccess","isError","errorMessage","jobsSlice","name","initialState","reducers","resetJobState","state","extraReducers","builder","addCase","pending","fulfilled","action","push","payload","rejected","actions","reducer"],"sources":["C:/Users/Huawe/OneDrive/Desktop/Muyen-main/Muyen-main/client/src/Features/jobsSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\nimport * as ENV from \"../config\";\r\n\r\n// جلب كل الوظائف\r\nexport const fetchJobs = createAsyncThunk(\r\n  \"jobs/fetchJobs\",\r\n  async (_, { rejectWithValue }) => {\r\n    try {\r\n      const res = await axios.get(`${ENV.SERVER_URL}/jobs`);\r\n      return res.data.jobs;\r\n    } catch (err) {\r\n      return rejectWithValue(err.response?.data?.error || err.message);\r\n    }\r\n  }\r\n);\r\n\r\n// تسجيل وظيفة\r\nexport const registerJob = createAsyncThunk(\r\n  \"jobs/registerJob\",\r\n  async (jobData, { rejectWithValue }) => {\r\n    try {\r\n      const res = await axios.post(`${ENV.SERVER_URL}/registerJob`, jobData);\r\n      return res.data.job;\r\n    } catch (err) {\r\n      // عرض رسالة الخطأ المرسلة من السيرفر\r\n      return rejectWithValue(err.response?.data?.error || err.message);\r\n    }\r\n  }\r\n);\r\n\r\nexport const initialJobState = {\r\n  jobs: [],\r\n  isLoading: false,\r\n  isSuccess: false,\r\n  isError: false,\r\n  errorMessage: \"\", // لإظهار رسالة الخطأ\r\n};\r\n\r\nconst jobsSlice = createSlice({\r\n  name: \"jobs\",\r\n  initialState: initialJobState,\r\n  reducers: {\r\n    resetJobState: (state) => {\r\n      state.isLoading = false;\r\n      state.isSuccess = false;\r\n      state.isError = false;\r\n      state.errorMessage = \"\";\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      // تسجيل وظيفة\r\n      .addCase(registerJob.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.isError = false;\r\n        state.errorMessage = \"\";\r\n      })\r\n      .addCase(registerJob.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.jobs.push(action.payload);\r\n        state.isSuccess = true;\r\n      })\r\n      .addCase(registerJob.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isError = true;\r\n        state.errorMessage = action.payload || \"Failed to register job\";\r\n      })\r\n\r\n      // جلب الوظائف\r\n      .addCase(fetchJobs.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.isError = false;\r\n        state.errorMessage = \"\";\r\n      })\r\n      .addCase(fetchJobs.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.jobs = action.payload;\r\n      })\r\n      .addCase(fetchJobs.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isError = true;\r\n        state.errorMessage = action.payload || \"Failed to fetch jobs\";\r\n      });\r\n  },\r\n});\r\n\r\nexport const { resetJobState } = jobsSlice.actions;\r\nexport default jobsSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}